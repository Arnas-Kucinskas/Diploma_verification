@page "/diploma"
@using Nethereum.Metamask.Blazor.Server.DB_Models;
@using  Nethereum.Metamask.Blazor.Server.DAL;
@inject DiplomaService objDiplomaService;

<NavLink class="nav-link" href="AddDiploma">
    <span class="oi oi-plus" aria-hidden="true"></span> Add New
</NavLink>
<div class="row">
    <div class="col-md-4">
        <div class="form-group">
            <input type="button" class="btn btn-primary" @onclick="@VerifyDoccuments" value="Verify Doccuments" />
        </div>
    </div>
</div>

<h1>Diplomas waiting for verification</h1>
@if (objDiploma == null)
{
    <p><em>Loading...</em></p>
}
else
{
<table class="table">
    <thead>
        <tr>
            <th>Diploma ID</th>
            <th>Name</th>
            <th>Last Name</th>
            <th>Studies Programe</th>
            <th>Studies Direction</th>
            <th>Hash</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var dip in objDiploma)
        {
        <tr>
            <td>@dip.ID</td>
            <td>@dip.Name</td>
            <td>@dip.LastName.</td>
            <td>@dip.StudiesProgram</td>
            <td>@dip.Studiesdirection</td>
            <td>@dip.Hash</td>
            <td>
                <a class="nav-link" href="EditDiploma/@dip.ID">
                    <span class="oi oi-pencil" aria-hidden="true"></span> Edit
                </a>
                <a class="nav-link" href="DeleteDiploma/@dip.ID">
                    <span class="oi oi-pencil" aria-hidden="true"></span> Delete
                </a>
            </td>
        </tr>
        }
    </tbody>
</table>
}

@code {
    List<Diploma_model> objDiploma;
    protected override async Task OnInitializedAsync()
    {
        objDiploma = await Task.Run(() => objDiplomaService.GetAllDiplomasInQueue());
    }
    protected void VerifyDoccuments()
    {
        Console.WriteLine("aa");
        //objDiplomaService.UpdateDiploma(objDiploma);
        //NavigationManager.NavigateTo("Diploma");
    }
}
